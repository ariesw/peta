
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>E-NAVIGATION </title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">

    <!-- ==============================================
    Favicons
    =============================================== -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

    <script type="text/javascript" src="cordova.js"></script>

    <!-- Material Design fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- CSS Files -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/leaflet.css"/>
    <link rel="stylesheet" type="text/css" href="css/style.css">


    <script src="js/leaflet.js"></script>
	  <script src="js/leaflet.ajax.min.js"></script>
    <script src="js/leaflet.contextmenu.js"></script>

  </head>
  <body>
  <div class="main-wrap" style="overflow:hidden;">
      <!-- MAPS -->
      <div class="maps-wraper">
		<div id="mapid" style="width: 100%; height: 100%"></div>
      </div>
	  <div class="e-zoom-in" id="cd-zoom-in">
		<i class="enav icon-enav-1"></i>
	  </div>
	  <div class="e-zoom-out" id="cd-zoom-out">
		<i class="enav icon-enav-2"></i>
	  </div>
      <div class="btn btn-raised e-home">
        <i class="enav icon-enav-6"></i>
      </div>       
      <div class="btn btn-raised e-location">
        <i class="enav icon-enav-4"></i>
      </div>     
      <div class="btn btn-raised e-layer" data-toggle="modal" data-target="#dialog-signup">
        <i class="enav icon-enav-3"></i>
      </div>  
    
      <div class="dropup main-button-pos">
        <a href="javascript:void(0)" class="btn btn-raised btn-main dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="enav icon-enav-5"></i></a>
        
        <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu2">
          <li><a href="submit-photo.html">HIDROGRAPHIC NOTE <i class="enav icon-enav-7"></i></a></li>
          <li><a href="javascript:void(0)" data-toggle="modal" data-target="#modal-weather" id="show-weather" style="display:none;">WEATHER <i class="enav icon-enav-21"></i></a></li>
          <li><a href="weather.html">WEATHER <i class="enav icon-enav-21"></i></a></li>
          <li><a href="subscription.html">SUBSCRIPTION <i class="enav icon-enav-8"></i></a></li>
          <li><a href="store.html">STORE <i class="enav icon-enav-9"></i></a></li>
          <li><a href="login.html">MY ACCOUNT <i class="enav icon-enav-10"></i></a></li>
          <li><a href="#">SETTINGS <i class="enav icon-enav-11"></i></a></li>
          <li><a href="#">HELP <i class="enav icon-enav-12"></i></a></li>
          <li><a href="#">CONTACT <i class="enav icon-enav-13"></i></a></li>
        </ul>
      </div>
      
      <div class="main-nav">
        <ul>
          <li><a href="#" data-toggle="modal" data-target="#dialog-signup"><i class="enav icon-enav-22"></i>PROFILE</a></li>
          <li><a href="#"><i class="enav icon-enav-23"></i>NAVIGATION</a></li>
          <li><a href="#"><i class="enav icon-enav-24"></i>TOOLS</a></li>
          <li><a href="#"><i class="enav icon-enav-25"></i>STORE</a></li>
        </ul>
      </div>
      <div class="main-nav-tex" id="menu-tex"> MENU </div> 
      
    <div class="notes" style="display: none;">
      <div class="container-fluid">
        <h2 class="notes-title">HIDROGRAPHIC NOTES</h2>
        <a href="#" class="btn btn-note">Chart</a>   
        <a href="#" class="btn btn-note">ENC</a>   
        <a href="#" class="btn btn-note">Publication</a>   
        <a href="#" class="btn btn-note">Port Information</a>   
        <a href="#" class="btn btn-note">Marine Life</a>   
      </div>
      <div class="nav-note">
        <ul>
          <li><a href="#" data-toggle="modal" data-target="#dialog-signup"><i class="enav icon-enav-26"></i>Draft</a></li>
          <li><a href="#"><i class="enav icon-enav-27"></i>Submitted</a></li>
        </ul>
      </div>
    </div>
      
  </div>



  <!-- Modal -->
  <div id="complete-dialog" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h4 class="modal-title">LAYER LIST</h4>
        </div>
        <div class="modal-ket">
          <button type="button" class="echeck"><i class="enav icon-enav-18"></i></button>
          <div class="list-title">Operational Layers</div>
          
        </div>
        
        <div class="modal-body">
          <form action="#" class="layer">
            <div class="checkbox">
              <label>
                <input type="checkbox"> Depth Area
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox"> Anchorage area - Green
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox"> Harbour area (administrative) - Purple
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox"> Exclusive Economic Zone - Navy
              </label>
            </div>
            <div class="checkbox">
              <label>
                <input type="checkbox"> Territorial sea area - Red
              </label>
            </div>
          </form>
          
        </div>
        
      </div>
    </div>
  </div>

  <!-- Modal Signup -->
  <div id="dialog-signup" class="modal fade" tabindex="-1">
    <div class="dialog-enav">
      <div class="dialog-header">
       <h2>Sign Up</h2>
       <p>Indonesia</p>
      </div>
      <div class="dialog-body form-box">
        <form action="#">
          <div class="form-group">
              <input type="text" id="p_name" class="form-control" placeholder="Username">
          </div>
          <div class="form-group">
              <input type="text" id="p_name" class="form-control" placeholder="Email">
          </div>
          <div class="form-group">
              <input type="text" id="p_name" class="form-control" placeholder="Password">
          </div>

          <div class="form-group form-group-w50">
              <select id="select1" class="form-control">
                <option>Country</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
              
          </div>
          <div class="form-group form-group-w50">
              <select id="select1" class="form-control">
                <option>City</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
          </div>
          <div class="clearfix"></div>
        </form>
      </div>
      <div class="dialog-footer">
          <a href="#" class="btn btn-form pull-left">CANCEL</a>
          <a href="#" class="btn btn-form pull-right">SIGNUP</a>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div id="detail-dialog" class="modal fade" tabindex="-1">
      <div class="modal-dialog">
          <div class="modal-content">
              <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  <h4 class="modal-title">Detail Location</h4>
              </div>
              <div class="modal-body">
                  <div class="row">
                      <div class="col-md-6"><img src="images/photo-submit.jpg" id="p_photo" class="img-responsive" alt=""></div>
                      
                  </div>
                  <form action="">
                      <div class="form-group is-empty">
                          <label class="control-label" for="focusedInput1">Name or Ship Name</label>
                          <input readonly="true" class="form-control" id="p_name" type="text">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="focusedInput2">Address</label>
                          <input readonly="true" class="form-control" id="p_address" type="text">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="focusedInput3">Telephone</label>
                          <input readonly="true" class="form-control" id="p_telephone" type="text">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="focusedInput4">Location</label>
                          <input readonly="true" class="form-control" id="p_location" type="text">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="focusedInput5">Position LIN/LAT</label>
                          <input readonly="true" class="form-control" id="p_latitude" type="text">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="focusedInput6">Position BUJ/LONG</label>
                          <input readonly="true" class="form-control" id="p_longitude" type="text">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="p_email">Accurancy</label>
                          <input readonly="true" type="text" id="p_accuracy" class="form-control">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="p_password">Datum</label>
                          <input readonly="true" type="text" id="p_datum" class="form-control">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="p_email">Chart Affected</label>
                          <input readonly="true" type="text" id="p_chart_affected" class="form-control">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="p_password">Edition</label>
                          <input readonly="true" type="text" id="p_edition" class="form-control">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="p_password">ENCs Affected</label>
                          <input readonly="true" type="text" id="p_encs_affected" class="form-control">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="p_email">Last NM used</label>
                          <input readonly="true" type="text" id="p_lastnm_used" class="form-control">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="p_password">Other Public Affected</label>
                          <input readonly="true" type="text" id="p_other_public_affected" class="form-control">
                              </div>
                      <div class="form-group is-empty">
                          <label class="control-label" for="p_email">Detail</label>
                          <input readonly="true" type="text" id="p_detail" class="form-control">
                              </div>
                      
                  </form>
              </div>
              
          </div>
      </div>
  </div>
  <!-- Modal 2 -->
  <div id="modal-weather" class="modal fade" tabindex="-1">
    <div class="modal-dialog">
      <ul class="weather-is">
          <li><a href="javascript:klikWeather()"><i class="enav icon-enav-15"></i><span class="title">WEATHER</span></a></li>
          <li><a href="javascript:klikLapor()"><i class="enav icon-enav-14"></i><span class="title">IMAGE</span></a></li>
        </ul>
    </div>
  </div>

	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script src="js/global.js"></script>

	<script>
	
		//var hammertime = new Hammer(
		//	$( "#mapid" )[ 0 ], {
		//	   domEvents: true
		//	}
		//);
		//hammertime.get('press').set({
		//	time: 1000
		//});
		
    
    
    var mymap = L.map('mapid',{contextmenu: true, preferCanvas: true, attributionControl:true, renderer: L.canvas()}).setView([-7.242883, 112.7211714], 8);
    

		L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
				attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
				maxZoom: 14
		}).addTo(mymap);
        
//         L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/outdoors-v10/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYXJpZXN3ZGQiLCJhIjoiY2o2djFlenhhMHh2MzJxbW43NmEwNmZtZCJ9.ZC-jO1LlC-53Yr3hhoSQ1A', {
//           maxZoom: 14,
//           attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
//             '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
//             'Imagery © <a href="http://mapbox.com">Mapbox</a>',
//           id: 'mapbox.streets'
//         }).addTo(mymap);
        
        var lat, lng, urlWeather, urlLapor;
        
        mymap.on("contextmenu", function (ev) {
               //L.marker(event.latlng).addTo(mymap);
                 lat = ev.latlng.lat;
                 lng = ev.latlng.lng;
               showOption();
               });
               
		function styleNya(feature){
			switch(feature.properties.LAYER){
                case 'Depth area' : return { fillcolor:'blue', fillOpacity: 0.5,
												  weight: 1,
											opacity: 1,
											color: 'white',
											dashArray: '1', };break;
                case 'Anchorage area' : return { fillOpacity: 0.5,
												  weight: 1,
											opacity: 0.5,
											color: 'green',
											dashArray: '2', };break;
                case 'Harbour area (administrative)' : return { fillOpacity: 0.5,
                                                weight: 1,
                                                opacity: 0.5,
                                                color: 'PURPLE',
                                                dashArray: '1', };break;
                case 'Exclusive Economic Zone' : return { fillOpacity: 0.5,
                                                weight: 1,
                                                opacity: 0.5,
                                                color: 'NAVY',
                                                dashArray: '1', };break;
                case 'Territorial sea area' : return { fillOpacity: 0.1,
                                                weight: 1,
                                                opacity: 0.5,
                                                color: 'red',
                                                dashArray: '1', };break;
                default: return { color: "none",fillOpacity: 0,
                    weight: 0,
                    opacity: 0,
                    dashArray: '0' };
			}
		}
    
    //$( "#mapid" ).on( "press", function( e ) {
    
    
                  //   showOption();
                   //  } );
                     
                     function showOption(){
                         //alert(lat+','+lng);
                         urlWeather = "weather.html?lat="+lat+"&lng="+lng;
                         urlLapor = "share.html?lat="+lat+"&lng="+lng;
                         //window.location.href = "share.html?lat="+lat+"&lng="+lng;
                         $("#show-weather").click();
                     }
    
    function klikWeather() {
        window.location.href = urlWeather;
    }
    
    function klikLapor() {
        window.location.href = urlLapor;
    }
    

    var jsonTest = new L.GeoJSON.AJAX(["https://www.arieswdd.com/geojson/ID1_66_area.geojson","https://www.indoedukasi.com/geojson/ID3_78_area.geojson","https://www.arieswdd.com/geojson/ID3_79_area.geojson","https://www.arieswdd.com/geojson/ID3_80_area.geojson","https://www.indoedukasi.com/geojson/ID3_81_area.geojson","https://www.arieswdd.com/geojson/ID3_82_area.geojson","https://www.indoedukasi.com/geojson/ID4_86_area.geojson","https://www.arieswdd.com/geojson/ID4_91_area.geojson","https://www.indoedukasi.com/geojson/ID4_96_area.geojson"],{style:styleNya}).addTo(mymap);
    
    jsonTest.refilter(function(feature){
                          return feature.properties.key === values;
                          });
	
		function onLocationFound(e) {
		var radius = e.accuracy / 2;
			L.marker(e.latlng).addTo(mymap).bindPopup("Anda dalam radius " + radius + " meter dari titik ini").openPopup();
			L.circle(e.latlng, radius).addTo(mymap);
		}

		function onLocationError(e) {
			alert(e.message);
		}

		mymap.on('locationfound', onLocationFound);
		mymap.on('locationerror', onLocationError);

		//mymap.locate({setView: true, maxZoom: 16});
		
		$(".e-location").click(function(){
			mymap.locate({setView:true, maxZoom: 14});
		});

    $("#menu-tex").click(function(){
      $('body').addClass('menushow');
    });
    $(".main-nav").click(function(){
      $('body').removeClass('menushow');
    });

function showDetail(element){
    var data = JSON.parse($(element).attr('rel'));
    $("#p_name").val(data.name);
    $("#p_address").val(data.address);
    $("#p_telephone").val(data.telephone);
    $("#p_location").val(data.location);
    $("#p_latitude").val(data.latitude);
    $("#p_longitude").val(data.longitude);
    $("#p_accuracy").val(data.accuracy);
    $("#p_datum").val(data.datum);
    $("#p_chart_affected").val(data.chart_affected);
    $("#p_edition").val(data.edition);
    $("#p_encs_affected").val(data.encs_affected);
    $("#p_lastnm_used").val(data.lastnm_used);
    $("#p_other_public_affected").val(data.other_public_affected);
    $("#p_detail").val(data.detail);
    $("#p_photo").attr("src",HOSTDOMAIN+"/imgs/files/hidrographic/"+data.photo);
}
    
    $.ajax({
           url:HOSTDOMAIN+'/index.php?act=get-list-hidrographic',
           type:'GET',
           dataType:'json',
           contentType:'json',
           cache: false,
           success:function(data){
           var data = data.data;
           for(var i=0;i<data.length;i++){
           //console.log();
           L.marker([data[i].latitude, data[i].longitude]).addTo(mymap).bindPopup("<b>"+data[i].name+"</b><br />"+data[i].address+".<br /><a href='#' onclick='showDetail(this)' rel='"+JSON.stringify(data[i])+"' data-toggle='modal' data-target='#detail-dialog' >Click To Detail</a>");
           }
           }
           });


		
	</script>


  

  </body>
</html>
