
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>E-NAVIGATION </title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">

    <!-- ==============================================
    Favicons
    =============================================== -->
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

    <script type="text/javascript" src="cordova.js"></script>

    <!-- Material Design fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!-- CSS Files -->
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="css/leaflet.css"/>
    <link rel="stylesheet" type="text/css" href="css/style.css">


    <script src="js/leaflet.js"></script>
	  <script src="js/leaflet.ajax.min.js"></script>
    <script src="js/leaflet.contextmenu.js"></script>

  </head>
  <body>
      <div class="main-wrap" style="overflow:hidden;">
          <!-- MAPS -->
          <div class="maps-wraper">
              <div id="mapid" style="width: 100%; height: 100%"></div>
          </div>
          <div class="e-zoom-in" id="cd-zoom-in">
              <i class="enav icon-enav-1"></i>
          </div>
          <div class="e-zoom-out" id="cd-zoom-out">
              <i class="enav icon-enav-2"></i>
          </div>
          <div class="btn btn-raised e-location">
              <i class="enav icon-enav-4"></i>
          </div>
          <div class="btn btn-raised e-layer">
              <i class="enav icon-enav-3"></i>
          </div>
          
          <div class="dropup main-button-pos">
              <a href="javascript:void(0)" class="btn btn-raised btn-main dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="enav icon-enav-5"></i></a>
              
              <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu2">
                  <li><a href="submit-photo.html">HIDROGRAPHIC NOTE <i class="enav icon-enav-7"></i></a></li>
                  <li><a href="javascript:void(0)" data-toggle="modal" data-target="#modal-weather" id="show-weather" style="display:none;">WEATHER <i class="enav icon-enav-21"></i></a></li>
                  <li><a href="weather.html">WEATHER <i class="enav icon-enav-21"></i></a></li>
                  <li><a href="subscription.html">SUBSCRIPTION <i class="enav icon-enav-8"></i></a></li>
                  <li><a href="store.html">STORE <i class="enav icon-enav-9"></i></a></li>
                  <li><a href="login.html">MY ACCOUNT <i class="enav icon-enav-10"></i></a></li>
                  <li><a href="#">SETTINGS <i class="enav icon-enav-11"></i></a></li>
                  <li><a href="#">HELP <i class="enav icon-enav-12"></i></a></li>
                  <li><a href="#">CONTACT <i class="enav icon-enav-13"></i></a></li>
              </ul>
          </div>
          
          <div class="main-nav">
              <ul>
                  <li><a href="#" data-toggle="modal" data-target="#dialog-signup"><i class="enav icon-enav-22"></i>PROFILE</a></li>
                  <li title="nav-navigation"><a href="#"><i class="enav icon-enav-23"></i>NAVIGATION</a>
                  </li>
                  <li title="nav-tools"><a href="#"><i class="enav icon-enav-24"></i>TOOLS</a></li>
                  <li><a href="#"><i class="enav icon-enav-25"></i>STORE</a></li>
              </ul>
              <div class="submenu">
                <!-- 1 -->
                <div class="submenu-container" id="nav-navigation">
                  <div class="submenu-title">Routes</div>
                  <div class="route-list">
                    <div class="item">
                      <div class="title">Jakarta - Surabaya</div>
                      <div class="info">
                        <div class="row">
                          <div class="col-xs-6">
                            Waypoints : 10
                          </div>
                          <div class="col-xs-6">
                            Distance : 938.83 nm
                          </div>
                        </div>
                      </div>
                      <div class="body-btn">
                        <div class="row">
                          <div class="col-xs-6">
                            <a href="#" class="btn">Use</a>
                          </div>
                          <div class="col-xs-6">
                            <a href="javascript:detailNavigation()" class="btn">Info</a>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="item">
                      <div class="title">Surabya - Bali</div>
                      <div class="info">
                        <div class="row">
                          <div class="col-xs-6">
                            Waypoints : 5
                          </div>
                          <div class="col-xs-6">
                            Distance : 235.65 nm
                          </div>
                        </div>
                      </div>
                      <div class="body-btn">
                        <div class="row">
                          <div class="col-xs-6">
                            <a href="#" class="btn">Use</a>
                          </div>
                          <div class="col-xs-6">
                            <a href="javascript:detailNavigation()" class="btn">Info</a>
                          </div>
                        </div>
                      </div>
                    </div>

                  </div>
                  <a href="#" class="btn btn-primary btn-lg btn-block">Create Route</a>
                </div>

                <!-- 2 -->
                <div class="submenu-container" id="nav-tools">
                  <a href="#" class="btn btn-lg btn-primary">H-Notes</a>
                  <a href="#" class="btn btn-lg btn-primary">Boat Settings</a>
                  <a href="#" class="btn btn-lg btn-primary">Units &amp; Languages</a>
                  <a href="#" class="btn btn-lg btn-primary">Tips &amp; User Manual</a>
                  <a href="#" class="btn btn-lg btn-primary">About</a>
                </div>

                <!-- 3 -->
                <div class="submenu-container" id="nav-navigation-detail">
                  <div class="row">

                    <div class="col-xs-6">
                      GPS : iOS
                    </div>
                    <div class="col-xs-6">
                      LAT : 07 &deg; 18.282' S
                    </div>

                    <div class="clearfix"></div>
                    <br>

                    <div class="col-xs-6">
                      Accurancy : 30m
                    </div>
                    <div class="col-xs-6">
                      LON : 112 &deg; 45.899' S
                    </div>

                    <div class="clearfix"></div>
                    <br>
                    
                    <div class="col-xs-6">
                      WAYPOINTS : 
                    </div>
                    <div class="col-xs-6">
                      <a href="#" class="btn btn-primary btn-lg btn-block">WP1</a>
                    </div>

                    <div class="clearfix"></div>
                    <br>

                    <div class="col-xs-6">
                      BTW : 035.0 &deg; <br>
                      DTW : 5.22 nm <br>
                      XTG : - 
                    </div>
                    <div class="col-xs-6">
                      TTG : - d - h - m <br>
                      ETA : dd/mm/yy, hh:mm
                    </div>
                    
                    <div class="clearfix"></div>
                    <br><br>

                    <div class="col-xs-12">
                      <a href="#" class="btn btn-primary btn-lg btn-block">Surabaya - Bali</a>
                    </div>


                  </div>
                </div>

              </div>
          </div>
          <div class="main-nav-tex" id="menu-tex"> MENU </div>
          
          <div class="notes" style="display: none;">
              <div class="container-fluid">
                  <h2 class="notes-title">HIDROGRAPHIC NOTES</h2>
                  <a href="#" class="btn btn-note">Chart</a>
                  <a href="#" class="btn btn-note">ENC</a>
                  <a href="#" class="btn btn-note">Publication</a>
                  <a href="#" class="btn btn-note">Port Information</a>
                  <a href="#" class="btn btn-note">Marine Life</a>
              </div>
              <div class="nav-note">
                  <ul>
                      <li><a href="#" data-toggle="modal" data-target="#dialog-signup"><i class="enav icon-enav-26"></i>Draft</a></li>
                      <li><a href="#"><i class="enav icon-enav-27"></i>Submitted</a></li>
                  </ul>
              </div>
          </div>
          
      </div>
      
      
      
      <!-- Modal -->
      <div id="h-notes" class="modal fade" tabindex="-1">
          <div class="notes">
              <div class="container-fluid">
                  <h2 class="notes-title">HIDROGRAPHIC NOTES</h2>
                  <a href="#" onclick="document.location.href='chart.html?lat='+lat+'&lng='+lng" class="btn btn-note">Chart</a>
                  <a href="#" class="btn btn-note">ENC</a>
                  <a href="#" class="btn btn-note">Publication</a>
                  <a href="#" class="btn btn-note">Port Information</a>
                  <a href="#" class="btn btn-note">Marine Life</a>
              </div>
              <div class="nav-note">
                  <ul>
                      <li><a href="#" data-toggle="modal" data-target="#dialog-signup"><i class="enav icon-enav-26"></i>Draft</a></li>
                      <li><a href="#"><i class="enav icon-enav-27"></i>Submitted</a></li>
                  </ul>
              </div>
          </div>
      </div>
      
      <!-- Modal Signup -->
      <div id="dialog-signup" class="modal fade" tabindex="-1">
          <div class="dialog-enav">
              <div class="dialog-header">
                  <h2>Sign Up</h2>
                  <p>IndoneSea</p>
              </div>
              <div class="dialog-body form-box">
                  <form action="#">
                      <div class="form-group">
                          <input type="text" id="p_name" class="form-control" placeholder="Username">
                              </div>
                      <div class="form-group">
                          <input type="text" id="p_name" class="form-control" placeholder="Email">
                              </div>
                      <div class="form-group">
                          <input type="text" id="p_name" class="form-control" placeholder="Password">
                              </div>
                      
                      <div class="form-group form-group-w50">
                          <select id="select1" class="form-control">
                              <option>Country</option>
                              <option>2</option>
                              <option>3</option>
                              <option>4</option>
                              <option>5</option>
                          </select>
                          
                      </div>
                      <div class="form-group form-group-w50">
                          <select id="select1" class="form-control">
                              <option>City</option>
                              <option>2</option>
                              <option>3</option>
                              <option>4</option>
                              <option>5</option>
                          </select>
                      </div>
                      <div class="clearfix"></div>
                  </form>
              </div>
              <div class="dialog-footer">
                  <a href="#" class="btn btn-form pull-left">CANCEL</a>
                  <a href="#" class="btn btn-form pull-right">SIGNUP</a>
              </div>
          </div>
      </div>
      
      <!-- Modal -->
      <div id="detail-dialog" class="modal fade" tabindex="-1">
          <div class="modal-dialog">
              <div class="modal-content">
                  <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                      <h4 class="modal-title">Detail Location</h4>
                  </div>
                  <div class="modal-body">
                      <form action="">
                          <div class="form-box">
                              <div class="form-group">
                                  <label for="" class="title">CHART DETAILS</label>
                              </div>
                              <div class="form-group">
                                  <input type="text" id="p_c_edition" class="form-control" placeholder="Edition">
                                      </div>
                              <div class="form-group form-group-w30">
                                  <input type="text" id="p_c_prefix" class="form-control" placeholder="Prefix">
                                      
                                      </div>
                              <div class="form-group form-group-w30">
                                  <input type="text" id="p_c_number" class="form-control" placeholder="Number">
                                      </div>
                              <div class="form-group form-group-w30">
                                  <input type="text" id="p_c_suffix" class="form-control" placeholder="Suffix">
                                      </div>
                              
                              <div class="clearfix"></div>
                          </div>
                          
                          <div class="form-box">
                              <div class="form-group">
                                  <label for="" class="title">NOTICE TO MARINERS</label>
                              </div>
                              <div class="form-group">
                                  <input type="text" id="p_nm_week" class="form-control" placeholder="NM Week">
                                      </div>
                              <div class="form-group">
                                  <input type="text" id="p_nm_year" class="form-control" placeholder="NM Year">
                                      </div>
                              
                              <div class="clearfix"></div>
                          </div>
                          
                          <div class="menu-box">
                              <h3>PHOTOS</h3>
                              <div class="row">
                                  <div class="col-md-6"><img src="images/photo-submit.jpg" id="p_photo" class="img-responsive" alt=""></div>
                              </div>
                          </div>
                          
                          <div class="form-box">
                              <div class="form-group text-center">
                                  <input type="text" id="p_latitude" class="form-control" placeholder="Latitude : N">
                                      </div>
                              <div class="form-group form-group-w30">
                                  <input type="text" id="p_lat_degrees" class="form-control" placeholder="Degrees">
                                      </div>
                              <div class="form-group form-group-w30">
                                  <input type="text" id="p_lat_minutes" class="form-control" placeholder="Minutes">
                                      </div>
                              <div class="form-group form-group-w30">
                                  <input type="text" id="p_lat_decimal" class="form-control" placeholder="Decimal">
                                      </div>
                              <div class="clearfix"></div>
                              <div class="form-group text-center">
                                  <input type="text" id="p_longitude" class="form-control" placeholder="Longitude : W">
                                      </div>
                              <div class="form-group form-group-w30">
                                  <input type="text" id="p_long_degrees" class="form-control" placeholder="Degrees">
                                      </div>
                              <div class="form-group form-group-w30">
                                  <input type="text" id="p_long_minutes" class="form-control" placeholder="Minutes">
                                      </div>
                              <div class="form-group form-group-w30">
                                  <input type="text" id="p_long_decimal" class="form-control" placeholder="Decimal">
                                      </div>
                              
                              <div class="clearfix"></div>
                          </div>
                          
                          <div class="form-box">
                              <div class="form-group text-center">
                                  <label for="" class="title">SUPORTING INFORMATION</label>
                              </div>
                              <div class="form-group">
                                  <textarea name="p_observation" id="p_observation" cols="30" rows="10" placeholder="Observation"></textarea>
                              </div>
                              <div class="form-group">
                                  <label class="label-switch">
                                      <input type="checkbox" class="switch switch-bootstrap status" name="p_source" id="p_source" value="1" checked="checked">
                                      <span class="lable">Not willing to be named as source</span></label>
                              </div>
                              
                              <div class="clearfix"></div>
                          </div>
                      </form>
                  </div>
                  
              </div>
          </div>
      </div>
      <!-- Modal 2 -->
      <div id="modal-weather" class="modal fade" tabindex="-1">
          <div class="modal-dialog">
              <ul class="weather-is">
                  <li><a href="javascript:klikWeather()"><i class="enav icon-enav-15"></i><span class="title">WEATHER</span></a></li>
                  <li><a href="javascript:klikLapor()"><i class="enav icon-enav-14"></i><span class="title">H NOTES</span></a></li>
                  <!-- <li><a href="#" data-toggle="modal" data-target="#h-notes"><i class="enav icon-enav-14"></i><span class="title">H NOTES</span></a></li> -->
              </ul>
          </div>
      </div>
      
      <script>
          document.addEventListener("deviceready", onDeviceReady, false);
          function onDeviceReady() {
              StatusBar.hide();
              localStorage.setItem("deviceuuid",device.uuid);
          }
      </script>

	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script src="js/global.js"></script>

	<script>
	
		//var hammertime = new Hammer(
		//	$( "#mapid" )[ 0 ], {
		//	   domEvents: true
		//	}
		//);
		//hammertime.get('press').set({
		//	time: 1000
		//});
		
        //StatusBar.hide();
 
    
    var mymap = L.map('mapid',{contextmenu: true, preferCanvas: true, attributionControl:true, renderer: L.canvas()}).setView([-7.242883, 112.7211714], 8);
    

L.tileLayer('https://api.mapbox.com/styles/v1/arieswdd/cj89yknij5tvj2snqxxldvxra/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYXJpZXN3ZGQiLCJhIjoiY2o2djFlenhhMHh2MzJxbW43NmEwNmZtZCJ9.ZC-jO1LlC-53Yr3hhoSQ1A', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
            '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
            'Imagery © <a href="http://mapbox.com">Mapbox</a>',
            id: 'mapbox.streets'
            }).addTo(mymap);
        
//         L.tileLayer('https://api.mapbox.com/styles/v1/mapbox/outdoors-v10/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYXJpZXN3ZGQiLCJhIjoiY2o2djFlenhhMHh2MzJxbW43NmEwNmZtZCJ9.ZC-jO1LlC-53Yr3hhoSQ1A', {
//           maxZoom: 14,
//           attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
//             '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
//             'Imagery © <a href="http://mapbox.com">Mapbox</a>',
//           id: 'mapbox.streets'
//         }).addTo(mymap);
        
        var lat, lng, urlWeather, urlLapor;
        
        mymap.on("contextmenu", function (ev) {
               //L.marker(event.latlng).addTo(mymap);
                 lat = ev.latlng.lat;
                 lng = ev.latlng.lng;
               showOption();
               });
               
		function styleNya(feature){
			switch(feature.properties.LAYER){
                case 'Depth area' : return { fillcolor:'blue', fillOpacity: 0.5,
												  weight: 1,
											opacity: 1,
											color: 'white',
											dashArray: '1', };break;
                case 'Anchorage area' : return { fillOpacity: 0.5,
												  weight: 1,
											opacity: 0.5,
											color: 'green',
											dashArray: '2', };break;
                case 'Harbour area (administrative)' : return { fillOpacity: 0.5,
                                                weight: 1,
                                                opacity: 0.5,
                                                color: 'PURPLE',
                                                dashArray: '1', };break;
                case 'Exclusive Economic Zone' : return { fillOpacity: 0.5,
                                                weight: 1,
                                                opacity: 0.5,
                                                color: 'NAVY',
                                                dashArray: '1', };break;
                case 'Territorial sea area' : return { fillOpacity: 0.1,
                                                weight: 1,
                                                opacity: 0.5,
                                                color: 'red',
                                                dashArray: '1', };break;
                default: return { color: "none",fillOpacity: 0,
                    weight: 0,
                    opacity: 0,
                    dashArray: '0' };
			}
		}
    
    //$( "#mapid" ).on( "press", function( e ) {
    
    
                  //   showOption();
                   //  } );
                     
                     function showOption(){
                         //alert(lat+','+lng);
                         urlWeather = "weather.html?lat="+lat+"&lng="+lng;
                         urlLapor = "share.html?lat="+lat+"&lng="+lng;
                         //window.location.href = "share.html?lat="+lat+"&lng="+lng;
                         $("#show-weather").click();
                     }
    
    function tes(){
        $('#h-notes').modal('show')
        $('#modal-weather').modal('hide')
        $('body').addClass('modal-open');
    }
    
    function klikWeather() {
        window.location.href = urlWeather;
    }
    
    function klikLapor() {
        //window.location.href = urlLapor;
        tes();
    }
    


	
		function onLocationFound(e) {
		var radius = e.accuracy / 2;
			L.marker(e.latlng).addTo(mymap).bindPopup("Anda dalam radius " + radius + " meter dari titik ini").openPopup();
			L.circle(e.latlng, radius).addTo(mymap);
		}

		function onLocationError(e) {
			alert(e.message);
		}

		mymap.on('locationfound', onLocationFound);
		mymap.on('locationerror', onLocationError);

		//mymap.locate({setView: true, maxZoom: 16});
		
		$(".e-location").click(function(){
			mymap.locate({setView:true, maxZoom: 14});
		});

    $("#menu-tex").click(function(){
      $('body').addClass('menushow');
    });
    var mn = $(".main-nav li");
    var sconten = $(".submenu .submenu-container");
    var pertama = true;

    mn.each(function(e){
      $(this).click(function(){
        var inya = $(this).attr('title');
        mn.removeClass('active'); 
        $(this).addClass('active');  

        sconten.hide();
          $(this).parent().parent().find('#'+inya).fadeIn( "slow" );
        // if(pertama){
        //   pertama = false;  
        //   $(this).parent().parent().find('#'+inya).slideDown( "slow" );
        // }else{
        //   sconten.hide();
        //   $(this).parent().parent().find('#'+inya).fadeIn( "slow" );
        // }

      });
    });

    function detailNavigation() {
        sconten.hide();
        $('#nav-navigation-detail').fadeIn( "slow" );
    }


    // $(".main-nav").click(function(){
    //   $('body').removeClass('menushow');
    // });
                                          
    function showDetail(element){
        var data = JSON.parse($(element).attr('rel'));
        $("#p_c_edition").val(data.c_edition);
        $("#p_c_prefix").val(data.c_prefix);
        $("#p_c_number").val(data.c_number);
        $("#p_c_suffix").val(data.c_suffix);
        $("#p_latitude").val(data.latitude);
        $("#p_longitude").val(data.longitude);
        $("#p_nm_week").val(data.nm_week);
        $("#p_nm_year").val(data.nm_year);
        $("#p_lat_degrees").val(data.lat_degrees);
        $("#p_lat_minutes").val(data.lat_minutes);
        $("#p_lat_decimal").val(data.lat_decimal);
        $("#p_long_degrees").val(data.long_degrees);
        $("#p_long_minutes").val(data.long_minutes);
        $("#p_long_decimal").val(data.long_decimal);
        $("#p_observation").val(data.observation);
        $("#p_photo").attr("src",HOSTDOMAIN+"/imgs/files/hidrographic/"+data.photo);
    }
    
    $.ajax({
           url:HOSTDOMAIN+'/index.php?act=get-list-hidrographic',
           type:'GET',
           dataType:'json',
           contentType:'json',
           cache: false,
           success:function(data){
           var data = data.data;
           for(var i=0;i<data.length;i++){
           //console.log();
           L.marker([data[i].latitude, data[i].longitude]).addTo(mymap).bindPopup("<b>"+data[i].c_edition+"</b><br />"+data[i].c_prefix+".<br /><a href='#' onclick='showDetail(this)' rel='"+JSON.stringify(data[i])+"' data-toggle='modal' data-target='#detail-dialog' >Click To Detail</a>");
           }
           }
           });
           
           
           
        </script>



  </body>
</html>
